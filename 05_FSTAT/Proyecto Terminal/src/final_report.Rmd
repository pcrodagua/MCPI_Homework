---
title: "Análisis Estadístico de Enfermedades en el Corazón"
author: "Pablo César Rodríguez Aguayo"
date: "Marzo 14, 2019*"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
```
<style>
body {
  text-align: justify
}
</style>

--------------------------------------------------------------------------------------------

# **Parte I**: Introducción

## Heart Disease UCI (Enfermedades del Corazón UCI)
Esta base de datos contiene 76 atributos, pero todos los experimentos publicados se refieren al uso de un subconjunto de 14 de ellos. En particular, la base de datos de Cleveland es la única que ha sido utilizada por los investigadores de Machine Learning hasta la fecha. El campo "objetivo" se refiere a la presencia de una enfermedad cardíaca en el paciente. Es un valor entero de 0 (sin presencia) a 4. Los experimentos con la base de datos de Cleveland se han concentrado en simplemente intentar distinguir la presencia (valores 1,2,3,4) de la ausencia (valor 0). Los nombres y números de seguridad social de los pacientes se eliminaron recientemente de la base de datos y se reemplazaron con valores ficticios.


## Problema Presentado
Dentro de la perspectiva social, sanitaria uno de los mayores retos que enfrentan las organizaciones de salud es la prestación de servicios los cuales permitan al paciente un costo bajo así como accesibilidad, con una calidad superior la cual garantice un diagnóstico objetivo. Un diagnóstico preciso comprende una toma de decisiones correcta la cual permita generar un diagnostico preciso para el paciente. Una decisión medica tomada de una forma no adecuada puede conducir a problemas mayores de salud donde cada vez se vuelven más costosos y difíciles de tratar, ya en última instancia pueden traer al paciente consecuencias desastrosas incluso llegando a la muerte. Habitualmente, las decisiones tomadas por el personal clínico a menudo son tomadas basándose en la intuición de los médicos y experiencia en lugar de las observaciones estadísticas de la información presentada, lo cual termina por llevar a errores de tratamiento, costos excesivos y efectos en la calidad de los servicios médicos de los pacientes.


## Significado del Diagnóstico 
El diagnóstico de enfermedad cardíaca se realiza mediante una combinación de signos clínicos y resultados de pruebas. Los tipos de pruebas que se realizarán se elegirán en función de lo que el médico cree que está pasando, que va desde los electrocardiogramas y las tomografías computarizadas (TC) cardiacas hasta las pruebas de sangre y las pruebas de esfuerzo con ejercicios.


## Alcance del Estudio
Para propositos de esta investigación, se pretende realizar un análsis exploratorio de los factores que influyen sobre las enfermedades cardiacas. Lo cual permtirá posteriormente aplicar diversas técnicas de minería de datos para descubrir patrones dentro de los datos que nos permitan obtener mediciones y descripciones de los datos a través de la estadística descriptiva.


## Análisis Exploratorio de Datos
El análisis exploratorio de datos permitirá resumir las características que rodean el fenómeno en cuestión. La importancia del análisis exploratorio permite proporcionar y definir la percepcion del conjunto de datos utilizado. Permtiendo definir los objetivos a través del análisis de los datos mediante resumenes numéricos los cuales se enfocan en el aspecto estadístico. De igual manera, permiten enfocarse en los objetivos de la investigacion a través de la delimitación de los datos no necesarios. 


## Recolección de Datos y Preprocesamiento
La recolección de datos y preprocesamiento estuvo a cargo de: 

1. Hungarian Institute of Cardiology. Budapest: Andras Janosi, M.D. 
2. University Hospital, Zurich, Switzerland: William Steinbrunn, M.D. 
3. University Hospital, Basel, Switzerland: Matthias Pfisterer, M.D. 
4. V.A. Medical Center, Long Beach and Cleveland Clinic Foundation: Robert Detrano, M.D., Ph.D.

Siendo donado por: David W. Aha (aha '@' ics.uci.edu) (714) 856-8779

Por lo que se desconocen los métodos de recolección y preprocesamiento empleados.




--------------------------------------------------------------------------------------------


# **Parte II**: Análisis Exploratorio

## Análisis de las Características

### Descripción
```{r description, echo=FALSE}
setwd("/home/ospcx/Proyects/MCPI_Homework/05_FSTAT/Proyecto Terminal/src/")
data <- read.csv(file = "../data/heart.csv", header = TRUE, sep = ",", stringsAsFactors=FALSE)
heart_data <- data.frame(data)
```
Dentro de las características del conjunto de datos, se presentan las siguientes: 

- **age:** Edad en años.
- **sex:** Sexo como variable dicotómica (1 = masculino, 0 = femenino)
- **cp:** Tipo de dolor en el pecho.
- **trestbps:** Presión arterial en reposo (en mmHg al ingresar en el hospital)
- **chol:** Colesterol sérico en mg/dl
- **fbs:** Azúcar en la sangre en ayunas >120mg/dl (1 = verdadero, 0 = falso)
- **restecg:** Resultados electrocardiográficos en reposo. 
- **thalach:** Ritmo Cardíaco Máximo Alcanzado
- **exang:**  Angina Inducida por el Ejercicio
- **oldpeak:** Depresión ST inducida por el ejercicio en relación con el descanso.
- **slope:** La pendiente del segmento pico del ejercicio ST.
- **ca:** Número de vasos principales (0-3) coloreados por fluoroscopia
- **thal:** 3 = normal, 6 = defecto fijo, 7 = defecto reversible
- **target:** Enfermo = 1, no enfermo = 0.

### Cabecera

```{r head, echo=FALSE, results='asis'}
kable(head(data), caption = 'Inicio del Conjunto de Datos')
```

### Cola

```{r tail, echo=FALSE, results='asis'}
kable(tail(data), caption = 'Final del Conjunto de Datos')
```

El conjunto de datos está conformado por 14 características y 303 observaciones.


## Máximos, Mínimos y Valores Atípicos 
Como se ha observado, el conjunto de datos tiene un número considerable de valores por lo que una de las metas es describir estas características y obtener una conclusión. El uso de máximos y mínimos permite el cálculo de otras medidas como el rango el cual se verá posteriormente. Además permite determinar los valores atípicos dentro del conjunto de datos, ya sean los valores atípicos menores o mayores.

```{r men_women_max}
# --- age --- 
women_age <- subset(heart_data, sex == 0)[c(1)]
men_age <- subset(heart_data, sex == 1)[c(1)]

# --- trestbps --- 
women_trestbps <- subset(heart_data, sex == 0)[c(4)]
men_trestbps <- subset(heart_data, sex == 1)[c(4)]

# --- chol --- 
women_chol <- subset(heart_data, sex == 0)[c(5)]
men_chol <- subset(heart_data, sex == 1)[c(5)]

# --- thalach --- 
women_thalach <- subset(heart_data, sex == 0)[c(8)]
men_thalach <- subset(heart_data, sex == 1)[c(8)]

# --- oldpeak --- 
women_oldpeak <- subset(heart_data, sex == 0)[c(10)]
men_oldpeak <- subset(heart_data, sex == 1)[c(10)]

```

### Máximos
Se define como el valor matemático mayor en el conjunto de datos.

```{r max}
max_vals_men <- c(max(men_age$age), max(men_trestbps$trestbps), max(men_chol$chol), max(men_thalach$thalach), max(men_oldpeak$oldpeak))
max_vals_women <- c(max(women_age$age), max(women_trestbps$trestbps), max(women_chol$chol), max(women_thalach$thalach), max(women_oldpeak$oldpeak))
max_vals_general <- c(max(heart_data$age), max(heart_data$trestbps), max(heart_data$chol), max(heart_data$thalach), max(heart_data$oldpeak))


data_gen <- cbind(max_vals_general ,max_vals_men, max_vals_women)
df.max_val <- data.frame(data_gen)
colnames(df.max_val) <- sex_ <- c('General', 'Hombre', 'Mujer')
rownames(df.max_val) <- c('Edad', 'Presión Arterial', 'Colesterol', 'Ritmo Cardíaco', 'Depresión ST')


kable(df.max_val, caption = 'Valores Máximos Obtenidos')


```


### Mínimos
Se define como el valor matemático menor en el conjunto de datos.

```{r min}
min_vals_men <- c(min(men_age$age), min(men_trestbps$trestbps), min(men_chol$chol), min(men_thalach$thalach), min(men_oldpeak$oldpeak))
min_vals_women <- c(min(women_age$age), min(women_trestbps$trestbps), min(women_chol$chol), min(women_thalach$thalach), min(women_oldpeak$oldpeak))
min_vals_general <- c(min(heart_data$age), min(heart_data$trestbps), min(heart_data$chol), min(heart_data$thalach), min(heart_data$oldpeak))


data_gen <- cbind(min_vals_general ,min_vals_men, min_vals_women)
df.min_val <- data.frame(data_gen)
colnames(df.min_val) <- sex_ <- c('General', 'Hombre', 'Mujer')
rownames(df.min_val) <- c('Edad', 'Presión Arterial', 'Colesterol', 'Ritmo Cardíaco', 'Depresión ST')


kable(df.min_val, caption = 'Valores Mínimos Obtenidos')
```

### Valores Atípicos
Se definen como los valores mucho mayores o menores que los demás valores en el conjunto de datos. O bien, se puede definir como el valor que radica por fuera del conjunto de datos establecido.





## Cuartiles y Percentiles
### Cuartiles
Los cuartiles son los tres valores de la variable que dividen a un conjunto de datos ordenados en cuatro partes iguales.

### Percentiles
Los percentiles son los 99 valores que dividen una serie de datos ordenados en 100 partes iguales. Los percentiles dan los valores correspondientes al 1%, al 2%... y al 99% de los datos.
$$P_{50} =  \tilde{x} = Q_2 = D_5$$

## Medidas de Tendencia Central

### Media
Primer momento alrededor del cero es la media o valor esperado de la variable aleatoria y se denota por $\mu$. La media de una variable aleatoria se considera como una cantidad numérica alrededor de la cual los valores de la variable aleatoria tienden a agruparse. Por lo tanto, la media es una medida de tendencia central. Para el cálculo de la media se utiliza:

$$\bar{x}=\frac{1}{n}\sum_{i=1}^n x_i$$


### Mediana
La mediana en un conjunto de datos es el valor medio cuando los valores son ordenados de manera ascendente o descendente. Igualmente, en este punto será calculada la mediana para futuras referencias, si $n$ es par entonces se calcula mediante:

$$\tilde{x} = x_{(n + 1)/2}$$

Por otro lado si $n$ es impar se calcula:

$$\tilde{x} = x_{(n + 1)/2} +  x_{n/2}$$



### Moda
Se refiere al valor que ocurre con más frecuencia.


## Medidas de Dispersión

### Rango
### Desviación Media



### Varianza
El segundo momento central,alrededor de la media, recibe el nombre de varianza de la variable aleatoria. La varianza de una variable aleatoria es una medida de la dispersión de la distribución de probabilidad de esta. La varianza puede representarse mediante la siguiente fórmula:

$$s^{2}=\frac{1}{N-1}\sum_{i=1}^N(x_i-\bar{x})^2$$

### Desviación Estándar

Y a su vez, se puede calcular la desviación estándar mediante:
$$s=\sqrt{\frac{1}{N-1}\sum_{i=1}^N(x_i-\bar{x})^2}$$
O bien:
$$s=\sqrt{s^2}$$

### Coeficiente de Variación

